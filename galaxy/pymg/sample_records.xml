<tool id="Sample_Records" name="SampleRecords" version="0.1.0">
    <description>Pull out a random sample of N records from a large collection</description>
  <command>
      sample_records.py $input_file.location -o $out_file
      -s $sample_size
      -T $input_file.type
  </command>
  <inputs>
    <conditional name="input_file">
        <param name="type" type="select" label="Record format">
            <option value='fasta' selected='True'>Fasta</option>
            <option value='fastq'>Fastq</option>
            <option value='table'>Table</option>
        </param>
        <when value="fasta">
            <param format="fasta" name="location" type="data" label="Input fasta database" help="Data missing? See TIP below"/>
        </when>
        <when value="fastq">
            <param format="fastq,fastqsanger,fastqillumina,fastqsanger" name="location" type="data" label="Input fastq database" help="Data missing? See TIP below"/>
        </when>
        <when value="table">
            <param format="tabular" name="location" type="data" label="Input data table" help="Data missing? See TIP below"/>
        </when>
    </conditional>
    <param name="sample_size" type="integer" size="10" value="1000000" label="Number of records to pull out"/>
  </inputs>
  <outputs>
      <data format="fasta" name="out_file">
	  <change_format>
            <when input="input_file.type" value="fastq" format="fastq" />
		</change_format>
	  <change_format>
            <when input="input_file.type" value="table" format="tabular" />
		</change_format>
	</data>
  </outputs>
  <help>

 .. class:: infomark

**What it does**

This tool takes a list of text records in some defined format (fasta, fastq, table) and randomly selects N records to print to the output file.

-----

**What it ACTUALLY does**

This tool runs the script sample_records.py from https://github.com/jmeppley/py-metagenomics

</help>
</tool>

